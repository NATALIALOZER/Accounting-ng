<div fxLayout="column" fxLayoutAlign="start" class="layout">
  <div class="title" fxLayout="row" fxLayoutAlign="space-between center">
    <h1>Страница истории</h1>
  </div>
  <ng-container *ngIf="eventId; then eventBlock else historyStatBlock">
  </ng-container>
  <ng-template #eventBlock>
    <app-event></app-event>
  </ng-template>
  <ng-template #historyStatBlock>
    <div fxLayout="column" *ngIf="dataSource && categoriesArray; else loading">
      <app-chart [data]="data" [categoriesArray] = categoriesArray></app-chart>
      <app-table [dataSource]="dataSource" [categoriesArray] = categoriesArray></app-table>
    </div>
    <div fxLayout="row" fxLayoutAlign="space-between" class="card-action" [ngStyle]="{'display' : dataSource && categoriesArray && !eventId? 'flex' : 'none'}">
      <button mat-raised-button color="primary"> Добавить событие </button>
      <mat-paginator #paginator pageSize=4 hidePageSize showFirstLastButtons></mat-paginator>
    </div>

    <ng-template #loading>
      <div fxLayout="row" fxLayoutAlign="center center"><p class="text-center">Loading...</p></div>
    </ng-template>
  </ng-template>
</div>
